---
import { Header } from '../components/layout/Header.tsx';
import { Home } from '../components/sections/Home.tsx';
import Mission from '../components/sections/Mission.astro';
import Services from '../components/sections/Services.astro';
import Clients from '../components/sections/Clients.astro';
import { Contact } from '../components/sections/Contact.tsx';
import Footer from '../components/sections/Footer.astro';
import Layout from '../layouts/Layout.astro';
import { SEO_DATA } from '../data/constants';
import { getCurrentLanguage, getTranslations } from '../utils/i18n-astro';

// Detectar idioma actual
const currentLang = getCurrentLanguage(Astro.url) as 'en' | 'es';

// Cargar traducciones para los componentes React
const commonTranslations = await getTranslations(currentLang, 'common');
const homeTranslations = await getTranslations(currentLang, 'home');
const contactTranslations = await getTranslations(currentLang, 'contact');
const navigationTranslations = await getTranslations(currentLang, 'navigation');
---

<Layout 
	title={SEO_DATA.home.title}
	description={SEO_DATA.home.description}
	keywords={SEO_DATA.home.keywords}
	ogImage="/assets/mapea-og-image.jpg"
	section="home"
	lang={currentLang}
>
	<div class="min-h-screen">
		<!-- Critical components - load immediately -->
		<Header 
			translations={commonTranslations} 
			navigationTranslations={navigationTranslations}
			currentLang={currentLang}
			client:load 
		/>
		
		<main>
			<!-- Above the fold - load when visible for better performance -->
			<Home 
				translations={homeTranslations}
				commonTranslations={commonTranslations}
				currentLang={currentLang}
				client:visible 
			/>
			
			<!-- Below the fold - Astro components (no hydration needed) -->
			<Mission lang={currentLang} />
			<Services lang={currentLang} />
			
			<!-- Far below - load when visible -->
			<!-- <Clients lang={currentLang} /> -->
			<Contact 
				translations={contactTranslations}
				commonTranslations={commonTranslations}
				currentLang={currentLang}
				client:visible 
			/>
		</main>
		
		<!-- Static footer - no hydration needed -->
		<Footer lang={currentLang} />
	</div>
</Layout>
